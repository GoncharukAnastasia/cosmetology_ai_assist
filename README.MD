# Косметолог-ассистент Telegram Bot

Этот проект представляет собой Telegram-бота @CosmeticAIAssistantBot, который выступает в роли косметолога-консультанта. Бот помогает пользователю подобрать косметические продукты с учетом его типа кожи, желаемого эффекта и ограничений (например, бюджет и аллергии). Для работы используются современные технологии:

- **LLM (Gigachat):** для извлечения ключевых параметров из сообщений пользователя.
- **Sentence Transformers:** для преобразования текстовых описаний продуктов в эмбеддинги.
- **FAISS:** для создания векторного хранилища и быстрого поиска похожих товаров.
- **SQLite:** для хранения базы данных косметических продуктов.
- **Langchain:** для формирования цепочки диалога и объяснения рекомендаций.

## Функциональные возможности

- **Поиск по схожести:** Продукты преобразуются в векторное представление и сохраняются в FAISS-индексе для быстрого поиска.
- **Интерактивный диалог:** Бот запрашивает у пользователя его предпочтения: тип кожи, желаемый эффект и ограничения.
- **Умное извлечение параметров:** Используется Gigachat для выделения ключевых сущностей из сообщений.
- **Детальное обоснование:** После подбора товаров бот объясняет, почему именно эти продукты подходят пользователю, с учетом их состава, эффекта и ограничений.
- **Гибкость обновления данных:** Параметры пользователя объединяются из нескольких сообщений без потери ранее введенной информации и с использованием памяти диалога.

## Установка

### Требования

- **Python:** 3.8 или выше.
- **Зависимости:** См. файл [requirements.txt](#requirements).

1. **Telegram Bot Token:**  
   Получите токен у [BotFather](https://t.me/BotFather) и укажите его в вашем коде. Вы можете использовать файл `.env` для хранения конфиденциальных данных. Переменную назовите BOT_TOKEN.

2. **Gigachat Credentials:**  
   Настройте корректные учетные данные для Gigachat. Добавьте токен в .env. Переменную назовите SBER_TOKEN.

3. **База данных:**  
   Создайте или обновите базу данных `skincare_products.db` с таблицей `products` в файле database.py. Таблица должна содержать следующие столбцы:
   - `name`
   - `skin_type`
   - `effect`
   - `components`
   - `price`

4. **Для запуска просто запустите main.py**


## Использование бота


1. **Запуск:**  
   При старте бот может отправлять приветственное сообщение (например, через команду `/start`).

2. **Ввод данных:**  
   Пользователь вводит информацию о своих предпочтениях. Бот извлекает и объединяет параметры из нескольких сообщений.

3. **Подбор продуктов:**  
   После сбора всех данных бот ищет подходящие косметические продукты, используя FAISS-индекс, созданный на основе эмбеддингов.

4. **Обоснование рекомендаций:**  
   Бот генерирует подробное объяснение, почему рекомендованы выбранные продукты, учитывая их состав, эффект и ограничения.

5. **Диалог:**  
   Пользователь может уточнять данные и получать новые рекомендации.


IT PURPLE HACK, 25 команда (Гончарук Анастасия, Морозова Мария, Максим Ворогушин, Алексей Вашкевич).
